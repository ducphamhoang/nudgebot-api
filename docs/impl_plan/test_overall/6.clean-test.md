I have created the following plan after thorough exploration and analysis of the codebase. Follow the below plan verbatim. Trust the files and references. Do not re-verify what's written in the plan. Explore only when absolutely necessary. First implement all the proposed file changes and then I'll review all the changes together at the end.

### Observations

The repository already has a well-organized essential test structure in `/test/essential/` with comprehensive Makefile targets. The test failure analysis shows that 10/16 essential tests are passing, with main issues being database migration setup and service constructor patterns. The essential test reorganization was successfully implemented but needs final fixes to achieve full reliability. Non-essential tests exist in original locations and need to be documented for future maintenance decisions.

### Approach

Based on the comprehensive analysis of test failure documents, I can see that the essential test infrastructure has been implemented but needs refinement. The main issues are: database migration setup missing in tests, some service constructor mismatches, and non-essential tests that should be documented or removed. 

The approach focuses on fixing the core essential test issues to achieve reliable test execution, documenting non-essential tests for future reference, and ensuring the essential test suite provides fast feedback for development workflow. Priority is given to making the existing essential tests work reliably rather than adding new tests.

### Reasoning

I analyzed the test failure documents in `docs/impl_plan/test_overall/` to understand the current test situation. I examined the repository structure to see that essential tests have been organized in `/test/essential/`. I checked the Makefile to confirm essential test targets are configured. I reviewed the test failure analysis to identify specific issues preventing reliable test execution.

## Mermaid Diagram

sequenceDiagram
    participant Dev as Developer
    participant Essential as Essential Tests
    participant DB as Test Database
    participant Mocks as Mock Services
    participant Docs as Documentation

    Note over Dev,Docs: Fix Essential Test Issues
    Dev->>Essential: Fix database migration setup
    Essential->>DB: Add MigrateWithValidation() call
    DB-->>Essential: Tables created successfully
    
    Dev->>Essential: Fix mock configurations
    Essential->>Mocks: Update event bus mock setup
    Mocks-->>Essential: Proper subscriber counts
    
    Note over Dev,Docs: Clean Up Non-Essential Tests
    Dev->>Docs: Document non-essential test inventory
    Dev->>Essential: Remove duplicate test files
    Essential-->>Dev: Clean test structure
    
    Note over Dev,Docs: Development Workflow
    Dev->>Essential: make test-essential-services (2-3 min)
    Essential-->>Dev: Quick service validation
    Dev->>Essential: make test-essential-flows (3-4 min)  
    Essential-->>Dev: End-to-end validation
    Dev->>Essential: make test-essential-suite (5-6 min)
    Essential-->>Dev: Comprehensive validation

## Proposed File Changes

### /home/user/nudgebot-api/test/essential/helpers/integration.go(MODIFY)

References: 

- /home/user/nudgebot-api/internal/nudge/migrations.go

Add database migration execution to the `SetupTestDatabase()` function to resolve the "relation 'users' does not exist" errors that are causing 3 essential service tests to fail. Import the `nudge` package and add a call to `nudge.MigrateWithValidation(testContainer.DB)` after the database connection is established but before returning the test container. This ensures that all required database tables and indexes are created before tests run, resolving the primary infrastructure issue blocking essential test success.

### /home/user/nudgebot-api/test/essential/services/chatbot_service_test.go(MODIFY)

References: 

- /home/user/nudgebot-api/internal/events/types.go
- /home/user/nudgebot-api/internal/mocks/event_bus_mock.go

Fix the mock event bus configuration issues causing `TestChatbotService_EventSubscriptions` and `TestChatbotService_EventValidation` to fail. Update the mock event bus setup to properly register event types and subscriber counts. Ensure that the event validation framework recognizes all event types used in tests. Add proper mock provider initialization patterns to resolve Telegram token requirement issues in test environment.

### /home/user/nudgebot-api/docs/impl_plan/test_overall/essential_test_status.md(NEW)

References: 

- /home/user/nudgebot-api/docs/impl_plan/test_overall/4.1_test_failure.md

Create a comprehensive status document for the essential test suite that summarizes the current state and provides guidance for maintaining essential tests. Document the 10/16 passing essential tests, the 3 database-related failures that need migration fixes, and the 3 mock configuration issues. Provide clear instructions for running essential tests during development workflow: `make test-essential-services` for quick service validation, `make test-essential-flows` for end-to-end testing, and `make test-essential-suite` for comprehensive validation. Include troubleshooting guidance for common issues like Docker not running, database migration failures, and mock setup problems.

### /home/user/nudgebot-api/docs/impl_plan/test_overall/non_essential_tests_inventory.md(NEW)

References: 

- /home/user/nudgebot-api/docs/impl_plan/test_overall/4.1_test_fail.md

Create a comprehensive inventory of non-essential tests that can be safely ignored or removed for MVP development workflow. Document all unit tests in original locations (`internal/*/service_test.go`, `api/handlers/*_test.go`, `pkg/logger/logger_test.go`) that provide module-specific validation but are not critical for feature development workflow. List integration tests in `/integration/` directory that are superseded by essential tests. Document the original test files that were migrated to essential structure and can be removed. Provide clear guidance on when to run non-essential tests (before releases, for comprehensive coverage) vs essential tests (during development, for fast feedback).

### /home/user/nudgebot-api/integration_test_fixed.go(DELETE)

References: 

- /home/user/nudgebot-api/internal/llm/service.go

Remove the legacy integration test file that contains outdated domain types and compilation errors. The file uses non-existent `llm.TaskSuggestion` type and `ParseTaskFromMessage` method that don't exist in the current LLM service interface. This legacy test is superseded by the organized essential tests and should be removed to avoid confusion and compilation issues.

### /home/user/nudgebot-api/README.md(MODIFY)

References: 

- /home/user/nudgebot-api/Makefile

Update the testing documentation section to emphasize the essential test suite for development workflow. Add a prominent "ðŸŽ¯ Essential Tests for Development" section that explains how to use `make test-essential-services` for quick validation when adding features, `make test-essential-flows` for end-to-end testing, and `make test-essential-suite` for comprehensive validation. Update the existing test documentation to clarify that `make test-all` includes comprehensive coverage but essential tests provide faster feedback for development iteration. Add troubleshooting notes about Docker requirement for testcontainers.

### /home/user/nudgebot-api/docs/impl_plan/test_overall/development_test_workflow.md(NEW)

References: 

- /home/user/nudgebot-api/Makefile
- /home/user/nudgebot-api/test/essential/essential_suite_test.go

Create a developer-focused guide for using the essential test suite during feature development. Provide clear workflow recommendations: run `make test-essential-services` after service changes (2-3 minutes), run `make test-essential-flows` after API changes (3-4 minutes), run `make test-essential-suite` before commits (5-6 minutes), and run `make test-all` before releases (10+ minutes). Include troubleshooting section for common issues like database migration failures, Docker not running, and mock setup problems. Provide guidance on when to add new tests to the essential suite vs keeping them as unit tests.